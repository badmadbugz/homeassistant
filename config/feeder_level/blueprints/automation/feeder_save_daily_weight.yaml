# Blueprint: в 23:59 сохранить weight_per_day в хелпер
# Копировать в config/blueprints/automation/feeder_level/ в HA

blueprint:
  name: Кормушка — сохранить вес за день
  description: |
    В 23:59 копирует значение сенсора «грамм за день» в хелпер «сохранённый вес за день».
    Первая часть цепочки накопления остатка корма.
  domain: automation
  input:
    weight_per_day_sensor:
      name: Сенсор «грамм за день»
      description: sensor.kormushka_weight_per_day (или аналог)
      selector:
        entity:
          domain: sensor
    saved_weight_helper:
      name: Хелпер «сохранённый вес за день»
      description: input_number.kormushka_saved_daily_weight
      selector:
        entity:
          domain: input_number

trigger:
  - platform: time
    at: "23:59:00"

action:
  - service: input_number.set_value
    target:
      entity_id: !input saved_weight_helper
    data:
      value: "{{ states('!input weight_per_day_sensor') | float(0) }}"

mode: single
